# コマンド補完 & ハイライト
autosuggest_paths=(
  "/opt/homebrew/share/zsh-autosuggestions/zsh-autosuggestions.zsh"       # for mac
  # "/usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh"  # for linux
)

syntax_highlight_paths=(
  "/opt/homebrew/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh"      # for mac
  # "/usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh" # for linux
)

# 存在するパスを見つけて読み込む関数
source_if_exists() {
  for p in "$@"; do
    if [ -f "$p" ]; then
      source "$p"
      return 
    fi
  done
}

source_if_exists "${autosuggest_paths[@]}"
source_if_exists "${syntax_highlight_paths[@]}"

autoload -Uz compinit && compinit

# navi をCtrl + gで呼び出し
eval "$(navi widget zsh)" 

# yaziの設定
function y() {
  local tmp="$(mktemp -t "yazi-cmd.XXXXXX)")" cwd
  yazi = "$@" --cwd-file="$tmp"
  if cwd="$(command cat -- "$tmp")" && [ -n "$cwd" ] && [ "$cwd" != "$PWD" ]; then
    builtin cd "$cwd"
  fi

  rm -f -- "$tmp"
}

